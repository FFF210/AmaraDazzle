<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.adminPayment">

	<!-- [brand2] 배너, 최고관리자의 승인 시 결제하기 버튼 -->
	<insert id="insertAdminPayment" parameterType="adminPayment">
		INSERT INTO
		admin_payment (payment_type, banner_id, membership_id, brand_id,
		order_id,
		amount, payment_key,
		pay_date, method, order_name,
		receipt_url)
		VALUES
		(#{paymentType}, #{bannerId}, #{membershipId},
		#{brandId}, #{orderId}, #{amount},
		#{paymentKey},#{payDate},#{method},#{orderName},#{receiptUrl} )
	</insert>


	<update id="updateSuccessByOrderId" parameterType="adminPayment">
		UPDATE
		admin_payment
		SET payment_key = #{paymentKey},
		pay_date = #{payDate},
		amount = #{amount}
		WHERE order_id = #{orderId}
	</update>

	<!-- [brand2] 배너, 상세보기 - 결제대기/결제완료용 -->
	<select id="existsByBannerId" parameterType="long"
		resultType="int">
		SELECT COUNT(*) FROM admin_payment WHERE banner_id = #{bannerId}
	</select>


</mapper>