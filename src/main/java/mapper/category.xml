<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.category">
	<!-- ======================= 소비자용 ======================= -->

	<!-- 카테고리 ID로 단일 카테고리 조회 / 상품 상세용 -->
	<select id="selectCategoryByCategoryId" parameterType="Long"
		resultType="dto.Category">
		SELECT * FROM category WHERE category_id = #{categoryId}
	</select>

	<!-- 대분류 목록 조회 -->
	<select id="selectLargeCategories" resultType="category">
		SELECT
		category_id, name, depth, parent_id
		FROM category
		WHERE depth = 1
		ORDER
		BY name
	</select>

	<!-- 특정 대분류에 속한 중분류 목록 조회 -->
	<select id="selectMiddleCategories" parameterType="long"
		resultType="category">
		SELECT category_id, name, depth, parent_id
		FROM category
		WHERE depth = 2
		AND parent_id = #{parentId}
		ORDER BY name
	</select>

	<!-- 특정 중분류에 속한 소분류 목록 조회 -->
	<select id="selectSmallCategories" parameterType="long"
		resultType="category">
		SELECT category_id, name, depth, parent_id
		FROM category
		WHERE depth = 3
		AND parent_id = #{parentId}
		ORDER BY name
	</select>

</mapper>