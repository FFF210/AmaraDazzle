<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.event">

	<!-- 이벤트 목록 조회 -->
	<select id="selectEventList" parameterType="map"
		resultType="eventList">
		SELECT
		e.event_id AS eventId,
		e.event_type AS eventType,
		e.start_date AS startDate,
		e.end_date AS endDate,
		e.event_name AS eventName,
		e.status AS status,
		e.writer AS writer,
		e.created_at AS applyDate,
		CASE
		WHEN a.event_application_id IS NOT NULL THEN '참여'
		ELSE '미참여'
		END AS participateYn
		FROM event e
		LEFT JOIN event_application a
		ON e.event_id = a.event_id
		AND a.brand_id = #{brandId}
		<where>
			<if test="status != null and status != '' and status != '전체'">
				AND e.status = #{status}
			</if>
		</where>
		ORDER BY e.created_at DESC
	</select>


</mapper>