<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.qna">
<!-- ======================소비자용===================== -->
 <!-- 상품 ID로 해당 상품의 문의 목록 조회 (공개된 것만) -->
    <select id="selectQnasByProductId" parameterType="Long" resultType="dto.Qna">
        SELECT * FROM qna
        WHERE product_id = #{productId}
        AND exposure_status = 'PUBLISHED'
        ORDER BY questioned_at DESC
        LIMIT 10
    </select>
    
    <!-- 상품의 문의 개수 조회 -->
    <select id="getQnaCountByProductId" parameterType="Long" resultType="Integer">
        SELECT COUNT(*) FROM qna
        WHERE product_id = #{productId}
        AND exposure_status = 'PUBLISHED'
    </select>
</mapper>